const games = [
    { title: "Square Dodger", icon: "ðŸŸ¦", file: "games/dodger.html" },
    { title: "Neon Runner", icon: "ðŸƒ", file: "games/runner.html" },
    { title: "Space Loot", icon: "ðŸš€", file: "games/space.html" }
];

const grid = document.getElementById('gameGrid');
const overlay = document.getElementById('gameOverlay');
const iframeContainer = document.getElementById('iframeContainer');

function loadGames() {
    grid.innerHTML = '';
    games.forEach(game => {
        const card = document.createElement('div');
        card.className = 'card';
        card.innerHTML = `
            <div class="card-img">${game.icon}</div>
            <div style="padding: 10px; font-weight: bold;">${game.title}</div>
        `;
        card.onclick = () => launchGame(game);
        grid.appendChild(card);
    });
}

function launchGame(game) {
    document.getElementById('activeGameTitle').innerText = game.title;
    overlay.style.display = 'flex';
    
    // THE FIX: We use an iframe and clear it every time to prevent "stiffness"
    iframeContainer.innerHTML = `<iframe src="${game.file}"></iframe>`;
}

function closeGame() {
    overlay.style.display = 'none';
    iframeContainer.innerHTML = ''; // This clears the memory
}

loadGames();
